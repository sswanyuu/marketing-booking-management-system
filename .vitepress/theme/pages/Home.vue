<template>
  <div class="home d-flex flex-column align-items-center">
    <!-- hero -->
    <section class="hero">
      <Button variant="primary">é ç´„ Demo</Button>
    </section>
    <!-- brands -->
    <section
      class="brands d-flex flex-column align-items-center gap-4 gap-md-8"
    >
      <div class="brands__title text-gray">é ˜å…ˆå“ç‰Œç‡å…ˆæ¡ç”¨</div>
      <div class="brands__list row justify-content-center">
        <img
          src="../assets/images/pages/home/brand-1.png"
          class="col-auto brand__logo"
          alt="brand-1"
        />
        <img
          src="../assets/images/pages/home/brand-2.png"
          class="col-auto brand__logo"
          alt="brand-2"
        />
        <img
          src="../assets/images/pages/home/brand-3.png"
          class="col-auto brand__logo"
          alt="brand-3"
        />
        <img
          src="../assets/images/pages/home/brand-4.png"
          class="col-auto brand__logo"
          alt="brand-4"
        />
        <img
          src="../assets/images/pages/home/brand-5.png"
          class="col-auto brand__logo"
          alt="brand-5"
        />
      </div>
    </section>
    <!-- features -->
    <section
      class="features rounded-4 bg-primary text-white d-flex justify-content-center"
    >
      <div
        class="header-container d-flex flex-column align-items-center gap-4 gap-md-6"
      >
        <div class="header-container__title">ä¸åªæ˜¯è¨‚ä½é€™éº¼ç°¡å–®</div>
        <div class="header-container__description text-center">
          å…¨æ–¹ä½è§£æ±ºæ–¹æ¡ˆï¼Œé›¶é–€æª»ä¸Šæ‰‹ï¼Œæ¡Œä½ç®¡ç†ã€æ‹“å±•å®¢æºï¼Œä¸€å¥—æå®šã€‚é ˜å…ˆå“ç‰Œç‡å…ˆæ¡ç”¨
        </div>
      </div>
    </section>
    <!-- pain points -->
    <section
      ref="painPointsSection"
      class="painpoints d-flex align-items-center flex-column gap-8"
    >
      <div class="painpoints-background" />
      <div
        class="header-container d-flex flex-column align-items-center gap-4 gap-md-6"
      >
        <div class="header-container__title">ç®¡ç†çš„é›£é¡Œï¼Œæˆ‘å€‘æ‡‚</div>
        <div class="header-container__description text-center text-gray">
          ä¸æ˜¯åªèƒ½ç¿’æ…£æ··äº‚ï¼Œæˆ‘å€‘æä¾›æ›´å¥½çš„é¸æ“‡ï¼Œè®“é¤å»³ç®¡ç†å›åˆ°ä½ èƒ½æŒæ¡çš„ç¯€å¥ï¼Œç—›é»ä¸å†æ˜¯æ—¥å¸¸ã€‚
        </div>
      </div>
      <!-- painpoints desktop -->
      <div class="painpoints__list row g-5 d-none d-md-flex">
        <img
          src="../assets/images/pages/home/painpoint-1.png"
          alt="painpoint-1"
          class="painpoints_item1 col-12"
        />
        <img
          src="../assets/images/pages/home/painpoint-2.png"
          alt="painpoint-2"
          class="painpoints_item2 col-auto"
        />
        <img
          src="../assets/images/pages/home/painpoint-3.png"
          alt="painpoint-3"
          class="painpoints_item3 col-auto"
        />
      </div>
      <!-- painpoints mobile -->
      <div
        class="painpoints__list gap-4 d-flex d-md-none flex-column align-items-stretch"
      >
        <img
          src="../assets/images/pages/home/painpoint-1-mobile.png"
          alt="painpoint-1"
          class="painpoints_item1"
        />
        <img
          src="../assets/images/pages/home/painpoint-2-mobile.png"
          alt="painpoint-2"
          class="painpoints_item2"
        />
        <img
          src="../assets/images/pages/home/painpoint-3-mobile.png"
          alt="painpoint-3"
          class="painpoints_item3"
        />
      </div>
    </section>
    <!-- background image -->
    <section class="background-image w-100 d-flex justify-content-end">
      <img src="../assets/images/pages/home/bg.png" alt="background-image" />
    </section>
    <!-- solutions -->
    <section class="solutions d-flex flex-column align-items-center">
      <div
        class="header-container d-flex flex-column align-items-center gap-4 gap-md-6"
      >
        <div class="header-container__title">
          å…¨æ–¹ä½çš„ç‡Ÿé‹é«”é©—ï¼Œè®“ä½ å°ˆæ³¨æŠŠé¤å»³åšåˆ°æœ€å¥½
        </div>
      </div>
      <!-- solutions desktop -->
      <div class="row g-5 d-flex d-none d-md-flex">
        <img
          src="../assets/images/pages/home/solution-1.png"
          alt="solution-1"
          class="col-md-6"
        />
        <img
          src="../assets/images/pages/home/solution-2.png"
          alt="solution-2"
          class="col-md-6"
        />
        <img
          src="../assets/images/pages/home/solution-3.png"
          alt="solution-3"
          class="col-md-6"
        />
        <img
          src="../assets/images/pages/home/solution-4.png"
          alt="solution-4"
          class="col-md-6"
        />
        <img
          src="../assets/images/pages/home/solution-5.png"
          alt="solution-5"
          class="col-md-12"
        />
        <div
          v-for="solution in solutions"
          :key="solution.title"
          class="col-md-6"
          :class="solution.containerClass"
        ></div>
      </div>
      <!-- solutions mobile -->
      <div class="row g-5 d-flex d-md-none">
        <img
          src="../assets/images/pages/home/solution-1-mobile.png"
          alt="solution-1"
          class="col-md-12"
        />
        <img
          src="../assets/images/pages/home/solution-2-mobile.png"
          alt="solution-2"
          class="col-md-12"
        />
        <img
          src="../assets/images/pages/home/solution-3-mobile.png"
          alt="solution-3"
          class="col-md-12"
        />
        <img
          src="../assets/images/pages/home/solution-4-mobile.png"
          alt="solution-4"
          class="col-md-12"
        />
        <img
          src="../assets/images/pages/home/solution-5-mobile.png"
          alt="solution-5"
          class="col-md-12"
        />
      </div>
    </section>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue';

const painPointsSection = ref(null);

const handleScroll = () => {
  if (!painPointsSection.value) return;

  const painpointsElement = painPointsSection.value;
  if (!painpointsElement) return;

  const rect = painpointsElement.getBoundingClientRect();
  const windowHeight = window.innerHeight;

  const scrollProgress = Math.max(
    0,
    Math.min(1, (windowHeight - rect.bottom) / windowHeight)
  );

  // Keep opacity at 1 when scrollProgress is 0-0.5, then fade from 0.5-1
  const opacity =
    scrollProgress <= 0.5 ? 1 : Math.max(0, 2 - 2 * scrollProgress);
  painPointsSection.value.style.opacity = opacity;
};

onMounted(() => {
  window.addEventListener('scroll', handleScroll);
  console.log('ğŸš€ ~ window:', window);
  handleScroll();
});

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll);
});
</script>

<style lang="scss">
@import '../../../scss/pages/_home.scss';
</style>
